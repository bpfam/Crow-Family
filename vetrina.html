<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CROW FAMILY — Vetrina</title>

<style>
  body{
    margin:0;
    background:radial-gradient(circle at top,#3a1a00 0%,#120700 50%,#000 100%);
    color:#ffb766;
    font-family:system-ui, Arial;
  }

  header{
    display:flex;
    align-items:center;
    gap:12px;
    padding:14px;
    background:#1a0a00;
    border-bottom:1px solid #ff8a00;
    box-shadow:0 0 20px #ff8a00aa;
  }

  .back{
    text-decoration:none;
    padding:10px 20px;
    background:#ff8a00;
    color:#000;
    border-radius:18px;
    font-weight:bold;
    box-shadow:0 0 15px #ff8a00aa;
  }

  .logo{
    height:62px;
    filter:drop-shadow(0 0 12px #ff8a00);
  }

  .title{
    font-size:20px;
    letter-spacing:2px;
  }

  .wrap{
    max-width:1100px;
    margin:0 auto;
    padding:16px;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
    gap:14px;
  }

  .card{
    background:#1a0a00;
    border:1px solid #ff8a00aa;
    border-radius:14px;
    padding:10px;
    box-shadow:0 0 25px #ff8a00aa;
    text-align:center;
  }

  video, img{
    width:100%;
    height:220px;
    object-fit:cover;
    border-radius:10px;
    background:#000;
  }

  .name{
    margin-top:6px;
    font-size:12px;
    color:#ffca8a;
  }

  .empty{
    text-align:center;
    margin-top:40px;
    font-size:14px;
  }
</style>
</head>

<body>

<header>
  <a class="back" href="index.html">⬅️ Home</a>
  <img class="logo" src="https://i.postimg.cc/1RgzW8Gk/crow.png">
  <div class="title">CROW FAMILY — VETRINA</div>
</header>

<div class="wrap">
  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none;">Nessun file trovato.</div>
</div>

<script>
(async () => {
  const owner = "bpfam";
  const repo  = "Crow-Family";
  const path  = "media";
  const api   = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

  const grid = document.getElementById("grid");
  const empty = document.getElementById("empty");

  const VIDEO_RE = /\.(mp4|mov|m4v|webm)$/i;
  const IMAGE_RE = /\.(jpg|jpeg|png|gif)$/i;

  try{
    const res = await fetch(api);
    const data = await res.json();

    const files = (Array.isArray(data) ? data : [])
      .filter(f => f.type === "file" && (VIDEO_RE.test(f.name) || IMAGE_RE.test(f.name)))
      .sort((a,b)=> a.name.localeCompare(b.name));

    if(!files.length){
      empty.style.display = "block";
      return;
    }

    for(const f of files){
      const card = document.createElement("div");
      card.className = "card";

      const encoded = encodeURIComponent(f.name);
      const src = `media/${encoded}`;

      let media;
      if(VIDEO_RE.test(f.name)){
        media = document.createElement("video");
        media.controls = true;
        media.src = src;
      } else {
        media = document.createElement("img");
        media.src = src;
      }

      const name = document.createElement("div");
      name.className = "name";
      name.textContent = f.name;

      card.appendChild(media);
      card.appendChild(name);
      grid.appendChild(card);
    }
  }
  catch(err){
    empty.style.display = "block";
    empty.textContent = "Errore nel caricare i file.";
  }
})();
</script>

</body>
</html>