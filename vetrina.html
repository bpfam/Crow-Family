<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>CROW FAMILY — VETRINA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  :root{
    --crow-orange:#ff9d00;
    --crow-deep:#050200;
    --crow-bg:#000;
  }

  *{
    box-sizing:border-box;
    margin:0;
    padding:0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", Arial, sans-serif;
  }

  body{
    min-height:100vh;
    background: radial-gradient(circle at top, #2b1300 0%, #120400 45%, #000 100%);
    color:#fff;
    text-align:center;
  }

  /* HEADER */
  header{
    position:sticky;
    top:0;
    z-index:10;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding:10px 14px;
    background:linear-gradient(180deg,#1a0700,#050200);
    border-bottom:1px solid rgba(255,157,0,.3);
    box-shadow:0 10px 30px rgba(0,0,0,.6);
  }

  .head-left{
    display:flex;
    align-items:center;
    gap:12px;
  }

  .home-btn{
    text-decoration:none;
    padding:.45rem 1.1rem;
    border-radius:999px;
    background: radial-gradient(circle at 20% 20%, #ffb347 0%, #ff7a00 45%, #b84300 100%);
    color:#000;
    font-weight:700;
    font-size:14px;
    box-shadow:0 0 18px rgba(255,122,0,.9);
    border:1px solid rgba(0,0,0,.3);
  }

  .logo{
    height:54px;
    border-radius:14px;
    box-shadow:
      0 0 0 2px rgba(0,0,0,.8),
      0 0 24px rgba(255,122,0,.9);
  }

  .title-wrap{
    text-align:left;
  }

  .title{
    font-size:14px;
    letter-spacing:2px;
    text-transform:uppercase;
    color:#ffcf8a;
  }

  .subtitle{
    font-size:10px;
    letter-spacing:2px;
    text-transform:uppercase;
    color:#f8d4a0;
    opacity:.85;
  }

  /* GRID */
  .wrap{
    max-width:1100px;
    margin:0 auto;
    padding:18px 14px 32px;
  }

  #msg{
    margin:36px 0 6px;
    font-size:13px;
    color:#ffcf8a;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
    gap:14px;
    margin-top:10px;
  }

  .item{
    background:#0c0c0c;
    border-radius:14px;
    padding:9px;
    box-shadow:
      0 0 0 1px rgba(255,157,0,.2),
      0 0 18px rgba(255,122,0,.35);
    transition:transform .15s ease, box-shadow .15s ease;
  }

  .item:hover{
    transform:translateY(-3px) scale(1.02);
    box-shadow:
      0 0 0 1px rgba(255,190,92,.6),
      0 0 26px rgba(255,140,20,.7);
  }

  .item video,
  .item img{
    width:100%;
    aspect-ratio:3/4;
    object-fit:cover;
    border-radius:10px;
    background:#000;
  }

  .item img{
    object-position:center;
  }

  .name{
    margin-top:6px;
    font-size:10px;
    color:#ffcf8a;
    opacity:.9;
    word-break:break-word;
  }

  footer{
    text-align:center;
    color:#ffcf8a;
    opacity:.8;
    padding:20px 10px 26px;
    font-size:11px;
    letter-spacing:2px;
    text-transform:uppercase;
  }
</style>
</head>

<body>

<header>
  <div class="head-left">
    <a href="index.html" class="home-btn">⬅️ Home</a>
    <img class="logo" src="https://i.postimg.cc/Y98rr6D8/016EFE45-D449-4427-B50A-C5AD733A26C3.png" alt="Crow Family">
    <div class="title-wrap">
      <div class="title">CROW FAMILY — VETRINA</div>
      <div class="subtitle">ONLY REAL • STREET QUALITY</div>
    </div>
  </div>
</header>

<div class="wrap">
  <div id="msg">Caricamento media…</div>
  <div id="grid" class="grid"></div>
</div>

<footer>
  © CROW FAMILY • ONLY REAL • STREET QUALITY
</footer>

<script>
(async () => {
  const owner = "bpfam";
  const repo  = "Crow-Family";
  const path  = "media";
  const api   = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;

  const grid = document.getElementById("grid");
  const msg  = document.getElementById("msg");

  const IMG_RE = /\.(jpe?g|png|webp|gif)$/i;
  const VID_RE = /\.(mp4|mov|m4v|webm)$/i;

  try{
    const res = await fetch(api);
    if(!res.ok){
      throw new Error("HTTP " + res.status);
    }
    const data = await res.json();
    const files = Array.isArray(data) ? data : [];

    let count = 0;

    files
      .filter(f => f.type === "file")
      .sort((a,b)=> a.name.localeCompare(b.name))
      .forEach(f => {
        const name = f.name;

        let type = null;
        if(VID_RE.test(name)) type = "video";
        else if(IMG_RE.test(name)) type = "image";
        else return; // estensione non supportata

        const encoded = encodeURIComponent(name).replace(/%20/g,"+");
        const src = `${path}/${encoded}`;

        const card = document.createElement("div");
        card.className = "item";

        if(type === "video"){
          const v = document.createElement("video");
          v.controls = true;
          v.playsInline = true;
          v.preload = "metadata";
          v.src = src;
          card.appendChild(v);
        } else {
          const img = document.createElement("img");
          img.src = src;
          img.loading = "lazy";
          card.appendChild(img);
        }

        const label = document.createElement("div");
        label.className = "name";
        label.textContent = name;
        card.appendChild(label);

        grid.appendChild(card);
        count++;
      });

    if(!count){
      msg.textContent = "Nessuna foto o video trovati nella cartella media.";
    } else {
      msg.textContent = "";
    }

  }catch(e){
    console.error(e);
    msg.textContent = "Errore nel caricare i file dalla cartella media.";
  }
})();
</script>

</body>
</html>